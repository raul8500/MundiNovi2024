"use strict";Object.defineProperty(exports, "__esModule", {value: true});// src/index.ts
function isObject(obj) {
  return typeof obj === "object" && obj !== null && !Array.isArray(obj);
}
function isEmptyObject(obj) {
  return typeof obj === "object" && obj !== null && !Object.keys(obj).length;
}
function stripEmptyObjects(obj, options = {}) {
  const cleanObj = obj;
  if (obj === null && options.removeAllFalsy) {
    return void 0;
  }
  if (!isObject(obj) && !Array.isArray(cleanObj)) {
    return cleanObj;
  }
  if (!Array.isArray(cleanObj)) {
    Object.keys(cleanObj).forEach((key) => {
      let value = cleanObj[key];
      if (typeof value !== "object") {
        return;
      }
      if (value === null) {
        if (options.removeAllFalsy) {
          delete cleanObj[key];
        }
        return;
      }
      value = stripEmptyObjects(value, options);
      if (isEmptyObject(value)) {
        delete cleanObj[key];
      } else {
        cleanObj[key] = value;
      }
    });
    return cleanObj;
  }
  cleanObj.forEach((o, idx) => {
    let value = o;
    if (typeof value === "object" && value !== null) {
      value = stripEmptyObjects(value, options);
      if (isEmptyObject(value)) {
        delete cleanObj[idx];
      } else {
        cleanObj[idx] = value;
      }
    } else if (value === null) {
      delete cleanObj[idx];
    }
  });
  return cleanObj.filter((el) => el !== void 0);
}
function removeUndefinedObjects(obj, options) {
  if (obj === void 0) {
    return void 0;
  }
  let withoutUndefined = JSON.parse(JSON.stringify(obj));
  withoutUndefined = stripEmptyObjects(withoutUndefined, options);
  if (isEmptyObject(withoutUndefined)) return void 0;
  return withoutUndefined;
}


exports.default = removeUndefinedObjects;

module.exports = exports.default;
//# sourceMappingURL=index.js.map